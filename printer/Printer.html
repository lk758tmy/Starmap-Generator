<html>
<head><title>_print</title></head>
<body>
    <button type="button" id="button">_print</button><br>
    <canvas id="canvas" width="1200" height="1200"></canvas>
    <script>
        //An adaption from C++ to JS. See the C++ code for the comments.
        var starX=[],starY=[],stars=[],relocate=[];
        var dX=[0,0,-1,-1,1,1],dY=[-1,1,0,1,-1,0];
        var starmap=[[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2],
                    [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,2],
                    [2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,2],
                    [2,2,2,2,2,2,2,2,2,2,2,2,2,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2],
                    [2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,2],
                    [2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2],
                    [2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2],
                    [2,2,2,2,2,2,2,2,2,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,2],
                    [2,2,2,2,2,2,2,2,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
                    [2,2,2,2,2,2,2,0,0,0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,2],
                    [2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2],
                    [2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,2],
                    [2,2,2,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
                    [2,2,2,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,2],
                    [2,2,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],
                    [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2],
                    [2,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2],
                    [2,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2],
                    [2,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,2,2,2,2],
                    [2,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,2,2,2,2],
                    [2,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,2,2,2,2,2,2,2],
                    [2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
                    [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]];
        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");
        var sideLength=60/Math.sqrt(3);
        function _transCoordY(x,y){
            return sideLength*(y-8)+sideLength*(x-1)/2;
        }
        function _print(){
            var tx,ty,a,b;
            ctx.clearRect(0, 0, 1200, 1200);
            ctx.lineWidth=1; ctx.strokeStyle="#000000";
            ctx.beginPath();
            for(var i=1;i<33;i++){
                a=(17-i>1)?(17-i):1; b=(49-i<33)?(49-i):33;
                for(var j=a;j<b;j++){
                    if(starmap[i][j]==1){
                        starX.push(i); starY.push(j);
                    }
                    for(var k=0;k<6;k++){
                        tx=i+dX[k]; ty=j+dY[k];
                        if(starmap[tx][ty]==2) continue;
                        ctx.moveTo(_transCoordY(i,j),i*30);
                        ctx.lineTo(_transCoordY(tx,ty),tx*30);                  
            }}}
            ctx.stroke();
            ctx.lineWidth=5; ctx.strokeStyle="#ff0000";
            ctx.beginPath();
            for(var i=0;i<64;i++){
                for(var j=0;j<6;j++){
                    tx=starX[i]; ty=starY[i];
                    ctx.moveTo(_transCoordY(tx,ty),tx*30);
		            while(1){
			            tx+=dX[j]; ty+=dY[j];
			            if(starmap[tx][ty]==2) break;
			            if(starmap[tx][ty]==1){
                            ctx.lineTo(_transCoordY(tx,ty),tx*30); break;
			}}}}
            ctx.stroke();
            ctx.fillStyle="#00bf00";
            for(var i=0;i<64;i++){
                ctx.beginPath();
                ctx.arc(_transCoordY(starX[i],starY[i]),starX[i]*30,10,0,2*Math.PI);
                ctx.fill();
            }            
        }

        var btn = document.getElementById("button");  
        btn.onclick=function(){ 
            _print();
        }
    </script>
</body>
</html>